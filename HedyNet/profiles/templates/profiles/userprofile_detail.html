{% extends "base.html" %}
{% load markdown_deux_tags %}
{% load static from staticfiles %}

{% block title %}Profile for: {{ user_profile.user.username }}{% endblock %}

{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" href="{% static "css/site/profiles.css" %}" />
{% endblock %}

{% block content %}
{% with user_profile.user.username as username %}
<div class="profile">
<div class="row">
<div class="columns">
<h1>Profile for {{ username }}{% if user_profile.display_name %}: {{ user_profile_display_name }}{% endif %}</h1>
</div>
</div>
<article class="row">
<div class="columns medium-6">
{% if can_edit %}
<a href="{% url "user_profile_edit" username=username %}" class="button">Edit</a>
{% endif %}
{% if user_profile.legal_name %}
<p>Legal Name: {{ user_profile.legal_name }}</p>
{% endif %}
<p>Preferred contact method: {{ user_profile.preferred_contact_method }}</p>
</div>
<div class="columns medium-6 panel">
<h4>Membership</h4>
<p>Status: {{ user_profile.status }}</p>
<p>Member since: {{ user_profile.became_member_on }}</p>
</div>
</article>

{% if user_profile.about %}
<article class="row">
<div class="columns">
<h3>About Me</h3>
{{ user_profile.about|markdown }}
</div>
</article>
{% endif %}

<section class="row">
<article class="columns large-4 medium-6 contact-info emails">
<h2{% if user_profile.preferred_contact_method = "email" %} class="preferred"{% endif %}>Email</h2>
{% if can_edit %}
<a class="button expand" href="{% url "user_profile_email_add" username=username %}">Add email</a>
{% endif %}
{% if preferred_email %}
{% with preferred_email as email_contact %}
{% include "profiles/includes/email_card.html" %}
{% endwith %}
{% endif %}
{% for email_contact in email_contacts %}
{% if email_contact != preferred_email %}
{% include "profiles/includes/email_card.html" %}
{% endif %}
{% empty %}
<p>No email information available</p>
{% endfor %}
</article>

<article class="columns large-4 medium-6 contact-info phones">
<h2{% if user_profile.preferred_contact_method = "phone" %} class="preferred"{% endif %}>Phone</h2>
{% if can_edit %}
<a class="button expand" href="{% url "user_profile_phone_add" username=username %}">Add phone number</a>
{% endif %}
{% if preferred_phone %}
{% with preferred_phone as phone_contact %}
{% include "profiles/includes/phone_card.html" %}
{% endwith %}
{% endif %}
{% for phone_contact in phone_contacts %}
{% if phone_contact != preferred_phone %}
{% include "profiles/includes/phone_card.html" %}
{% endif %}
{% empty %}
<p>No phone information available</p>
{% endfor %}
</article>

<article class="columns large-4 medium-6 contact-info addresses">
<h2{% if user_profile.preferred_contact_method = "address" %} class="preferred"{% endif %}>Address</h2>
{% if can_edit %}
<a class="button expand" href="{% url "user_profile_address_add" username=username %}">Add address</a>
{% endif %}
{% if preferred_address %}
{% with preferred_address as address_contact %}
{% include "profiles/includes/address_card.html" %}
{% endwith %}
{% endif %}
{% for address_contact in address_contacts %}
{% if address_contact != preferred_address %}
{% include "profiles/includes/address_card.html" %}
{% endif %}
{% empty %}
<p>No address information available</p>
{% endfor %}
</article>

</section>

<div class="row">
<div class="columns">
<p><a href="{% url "memberdirectory" %}">Back to member directory</a></p>
</div>
</div>

</div>
{% endwith %}
{% endblock %}
